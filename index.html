<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Movie Box - Your Ultimate Movie Destination</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1b69 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Navigation */
        nav {
            background: rgba(0, 0, 0, 0.9);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff6b6b;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #ff6b6b;
        }

        /* Main Content Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 2rem 2rem;
            flex: 1; /* This makes the container grow and push the footer down */
        }

        /* Page Visibility */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Enhanced Homepage Styles */
        .hero {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 107, 107, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px rgba(255, 107, 107, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(78, 205, 196, 0.4)); }
        }

        .hero .subtitle {
            font-size: 1.8rem;
            color: #4ecdc4;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto 2rem;
            line-height: 1.6;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff6b6b;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .movie-showcase {
            margin: 4rem 0;
        }

        .showcase-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #4ecdc4;
        }

        .trending-movies {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
            scroll-behavior: smooth;
        }

        .trending-movie {
            min-width: 150px;
            height: 225px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .trending-movie:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
        }

        .trending-movie img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .movie-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            padding: 1rem 0.5rem 0.5rem;
            font-size: 0.8rem;
            text-align: center;
        }

        /* Footer Styles */
        footer {
            background: rgba(0, 0, 0, 0.9);
            border-top: 1px solid rgba(255, 107, 107, 0.3);
            padding: 1.5rem 0;
            position: relative;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            text-align: center;
        }

        .footer-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .footer-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-brand h4 {
            color: #ff6b6b;
            font-size: 1.1rem;
            margin: 0;
        }

        .footer-links {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #ffffff;
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .footer-links a:hover {
            color: #4ecdc4;
            opacity: 1;
        }

        .tmdb-attribution {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
            flex-wrap: wrap;
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .tmdb-logo {
            height: 20px;
            border-radius: 3px;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 1rem;
            text-align: center;
            opacity: 0.6;
            font-size: 0.8rem;
        }

        /* Responsive Footer */
        @media (max-width: 768px) {
            .footer-main {
                flex-direction: column;
                text-align: center;
            }
            
            .footer-links {
                justify-content: center;
            }
            
            .tmdb-attribution {
                font-size: 0.7rem;
            }
        }

        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: #ff6b6b;
            box-shadow: 0 20px 40px rgba(255, 107, 107, 0.3);
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #4ecdc4;
        }

        .feature-card p {
            opacity: 0.8;
            line-height: 1.5;
        }

        /* Movie Wheel Styles */
        .wheel-container {
            text-align: center;
            margin-bottom: 3rem;
        }

        .genre-selection {
            margin-bottom: 2rem;
        }

        .genre-selection h3 {
            margin-bottom: 1rem;
            color: #4ecdc4;
        }

        select {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 2px solid #4ecdc4;
            border-radius: 8px;
            padding: 0.8rem 1rem;
            font-size: 1rem;
            margin: 0.5rem;
            cursor: pointer;
        }

        select option {
            background: #2d1b69;
            color: #ffffff;
        }

        .wheel {
            width: 300px;
            height: 300px;
            border: 8px solid #ff6b6b;
            border-radius: 50%;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: conic-gradient(
                #ff6b6b 0deg 60deg,
                #4ecdc4 60deg 120deg,
                #45b7d1 120deg 180deg,
                #f9ca24 180deg 240deg,
                #6c5ce7 240deg 300deg,
                #fd79a8 300deg 360deg
            );
            position: relative;
            transition: transform 2s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .wheel-center {
            width: 80px;
            height: 80px;
            background: #1a1a1a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            z-index: 2;
        }

        .spin-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: #ffffff;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 1rem;
        }

        .spin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }

        .spin-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Movie Results */
        .movie-result {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .movie-poster {
            max-width: 200px;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        /* Top Movies List */
        .movies-grid {
            display: flex; /* Changed from grid to flex */
            flex-direction: column; /* Stack items vertically */
            gap: 1.5rem; /* Space between list items */
            margin-top: 2rem;
        }

        .movie-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex; /* Use flexbox for card layout */
            align-items: flex-start; /* Align items to the top */
            position: relative; /* For the overview */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(78, 205, 196, 0.2);
            border-color: #4ecdc4;
        }

        .movie-card img {
            width: 100px; /* Fixed width for poster */
            height: 150px; /* Fixed height for poster */
            object-fit: cover;
            flex-shrink: 0; /* Prevent image from shrinking */
        }

        .movie-card-info {
            padding: 1rem 1.5rem;
            flex-grow: 1; /* Allow info to take remaining space */
        }

        .movie-card h4 {
            color: #4ecdc4;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .movie-rating {
            color: #f9ca24;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .movie-card-overview {
            font-size: 0.9rem;
            opacity: 0; /* Hidden by default */
            max-height: 0; /* Hidden by default */
            overflow: hidden;
            transition: opacity 0.4s ease, max-height 0.4s ease;
            line-height: 1.5;
            color: rgba(255,255,255,0.8);
        }

        .movie-card:hover .movie-card-overview {
            opacity: 1; /* Show on hover */
            max-height: 100px; /* An appropriate max-height to reveal the text */
        }


        /* Loading and Error States */
        .loading {
            text-align: center;
            padding: 3rem;
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .error {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #ff4757;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .feature-cards {
                grid-template-columns: 1fr;
            }

            .wheel {
                width: 250px;
                height: 250px;
            }

            .movie-card img {
                width: 80px;
                height: 120px;
            }

            .movie-card h4 {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">🎬 The Movie Box</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showPage('home')" class="active">Home</a></li>
                <li><a href="#" onclick="showPage('wheel')">Movie Wheel</a></li>
                <li><a href="#" onclick="showPage('top-movies')">Top Movies</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Homepage -->
        <div id="home" class="page active">
            <div class="hero">
                <div class="subtitle">Welcome to</div>
                <h1>The Movie Box</h1>
                <p>Your ultimate destination for discovering incredible movies from around the world. Whether you're in the mood for action, romance, comedy, or something completely unexpected, we've got the perfect recommendation waiting for you.</p>
                
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number">50K+</span>
                        <span class="stat-label">Movies Available</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">20+</span>
                        <span class="stat-label">Genres</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">∞</span>
                        <span class="stat-label">Possibilities</span>
                    </div>
                </div>
            </div>

            <div class="movie-showcase">
                <h3 class="showcase-title">🔥 Trending Now</h3>
                <div class="trending-movies" id="trendingMovies">
                    <div class="loading">Loading trending movies...</div>
                </div>
            </div>

            <div class="feature-cards">
                <div class="feature-card" onclick="showPage('wheel')">
                    <h3>🎰 Movie Roulette</h3>
                    <p>Can't decide what to watch? Let our movie roulette wheel choose for you! Select your favorite genre and spin for a personalized recommendation that's sure to surprise and delight.</p>
                </div>
                
                <div class="feature-card" onclick="showPage('top-movies')">
                    <h3>🏆 Critics' Choice</h3>
                    <p>Explore the highest-rated and most critically acclaimed films of all time. These masterpieces have stood the test of time and are guaranteed to provide an unforgettable cinematic experience.</p>
                </div>
            </div>
        </div>

        <!-- Movie Wheel Page -->
        <div id="wheel" class="page">
            <div class="wheel-container">
                <h2>🎰 Spin the Movie Wheel</h2>
                <p>Choose your preferences and spin to discover your next movie!</p>

                <div class="genre-selection">
                    <h3>Select Genre:</h3>
                    <select id="genreSelect">
                        <option value="">Any Genre</option>
                        <option value="28">Action</option>
                        <option value="12">Adventure</option>
                        <option value="16">Animation</option>
                        <option value="35">Comedy</option>
                        <option value="80">Crime</option>
                        <option value="99">Documentary</option>
                        <option value="18">Drama</option>
                        <option value="10751">Family</option>
                        <option value="14">Fantasy</option>
                        <option value="36">History</option>
                        <option value="27">Horror</option>
                        <option value="10402">Music</option>
                        <option value="9648">Mystery</option>
                        <option value="10749">Romance</option>
                        <option value="878">Science Fiction</option>
                        <option value="10770">TV Movie</option>
                        <option value="53">Thriller</option>
                        <option value="10752">War</option>
                        <option value="37">Western</option>
                    </select>
                </div>

                <div class="wheel" id="movieWheel">
                    <div class="wheel-center">SPIN</div>
                </div>

                <button class="spin-btn" id="spinBtn" onclick="spinWheel()">
                    🎲 Spin the Wheel!
                </button>

                <div id="movieResult" class="movie-result" style="display: none;">
                    <!-- Movie result will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Top Movies Page -->
        <div id="top-movies" class="page">
            <h2>⭐ Top Rated Movies</h2>
            <p>Discover the highest-rated movies from around the world</p>

            <div id="topMoviesGrid" class="movies-grid">
                <div class="loading">Loading amazing movies...</div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-brand">
                    <span>🎬</span>
                    <h4>The Movie Box</h4>
                </div>
                
                <div class="footer-links">
                    <a href="#" onclick="showPage('home')">Home</a>
                    <a href="#" onclick="showPage('wheel')">Movie Roulette</a>
                    <a href="#" onclick="showPage('top-movies')">Top Rated</a>
                    <a href="#" onclick="showAbout()">About</a>
                </div>
            </div>

            <div class="tmdb-attribution">
                <span>Powered by</span>
                <img src="https://www.themoviedb.org/assets/2/v4/logos/v2/blue_long_1-8ba2ac31f354005783fab473602c34c3f4fd207150182061e425d366e4f34596.svg" alt="TMDb" class="tmdb-logo">
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 The Movie Box. Made with ❤️ for movie lovers.</p>
                <p>🐱‍👤 A Project By Ahmad Raza.</p>
            </div>
        </div>
    </footer>

    <script>
        // TMDb API Configuration
        const API_KEY = '8de1100a9c43b599f84e99ace341beee'; // Your TMDb API key
        const READ_ACCESS_TOKEN = 'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4ZGUxMTAwYTljNDNiNTk5Zjg0ZTk5YWNlMzQxYmVlZSIsIm5iZiI6MTc1NDgwODcwOS40MDcsInN1YiI6IjY4OTg0MTg1YzY5ZjA1MTUxZTI2NzlmNiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.5jDwUVXJCx1DHGhl5GrYWYEqotqB6p6yzhS3Aj6l0W8'; // Your Read Access Token
        
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';

        // Helper function to make API requests
        async function makeAPIRequest(endpoint) {
            const fullUrl = `${BASE_URL}${endpoint}`;
            
            // Add the API key to the URL if it's not already there
            const urlWithKey = new URL(fullUrl);
            if (!urlWithKey.searchParams.has('api_key')) {
                 urlWithKey.searchParams.append('api_key', API_KEY);
            }

            try {
                const response = await fetch(urlWithKey.toString(), {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${READ_ACCESS_TOKEN}`
                    }
                });

                if (!response.ok) {
                     const errorData = await response.json();
                     throw new Error(`Failed to fetch data: ${errorData.status_message || response.status}`);
                }
                
                return response.json();
            } catch (error) {
                console.error("Fetch error:", error);
                throw error; // Re-throw the error to be caught by the calling function
            }
        }

        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Add active class to current nav link
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Load content for specific pages
            if (pageId === 'top-movies') {
                loadTopMovies();
            } else if (pageId === 'home') {
                loadTrendingMovies();
            }
        }

        // Load trending movies for homepage
        async function loadTrendingMovies() {
            const container = document.getElementById('trendingMovies');
            container.innerHTML = '<div class="loading">Loading trending movies...</div>';
            
            try {
                const data = await makeAPIRequest(`/trending/movie/day`);
                
                if (data.results && data.results.length > 0) {
                    displayTrendingMovies(data.results.slice(0, 10)); // Show first 10
                } else {
                    throw new Error('No trending movies found');
                }
            } catch (error) {
                console.error('Error loading trending movies:', error);
                container.innerHTML = `
                    <div class="error" style="text-align: center; padding: 2rem; opacity: 0.7;">
                        <p>Unable to load trending movies</p>
                        <button onclick="loadTrendingMovies()" class="spin-btn" style="padding: 0.5rem 1rem; font-size: 0.9rem; margin-top: 1rem;">🔄 Retry</button>
                    </div>
                `;
            }
        }

        function displayTrendingMovies(movies) {
            const container = document.getElementById('trendingMovies');
            
            container.innerHTML = movies.map(movie => {
                const posterUrl = movie.poster_path ? `${IMAGE_BASE_URL}${movie.poster_path}` : 'https://via.placeholder.com/150x225?text=No+Poster';
                const rating = movie.vote_average ? movie.vote_average.toFixed(1) : 'N/A';
                
                return `
                    <div class="trending-movie" title="${movie.title} (${rating}⭐)">
                        <img src="${posterUrl}" alt="${movie.title}">
                        <div class="movie-overlay">
                            <div style="font-weight: bold;">${movie.title.length > 20 ? movie.title.substring(0, 17) + '...' : movie.title}</div>
                            <div>⭐ ${rating}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Quick genre navigation
        function showGenre(genreId) {
            showPage('wheel');
            setTimeout(() => {
                const genreSelect = document.getElementById('genreSelect');
                genreSelect.value = genreId;
            }, 100);
        }

        // About function placeholder
        function showAbout() {
            alert('🎬 About The Movie Box\n\nWe\'re passionate about helping movie lovers discover their next favorite film! Our platform combines the power of The Movie Database with fun, interactive tools to make movie discovery exciting and personalized.\n\n✨ Features:\n• Movie Roulette Wheel\n• Top Rated Collections\n• Trending Movies\n• Genre-based Recommendations\n\nBuilt with ❤️ for cinephiles everywhere!');
        }

        // Movie Wheel Functionality
        async function spinWheel() {
            const spinBtn = document.getElementById('spinBtn');
            const wheel = document.getElementById('movieWheel');
            const result = document.getElementById('movieResult');
            const genreSelect = document.getElementById('genreSelect');

            // Disable button and show loading
            spinBtn.disabled = true;
            spinBtn.textContent = '🎲 Spinning...';
            result.style.display = 'none';

            // Spin animation
            const randomSpins = Math.floor(Math.random() * 3) + 3; // 3-5 full spins
            const randomDegree = Math.floor(Math.random() * 360);
            const totalRotation = (randomSpins * 360) + randomDegree;
            
            wheel.style.transform = `rotate(${totalRotation}deg)`;

            try {
                // Wait for animation to complete
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Get random movie
                const selectedGenre = genreSelect.value;
                const movie = await getRandomMovie(selectedGenre);
                
                if (movie) {
                    displayMovieResult(movie);
                } else {
                    throw new Error('No movies found for the selected criteria');
                }
            } catch (error) {
                console.error('Error getting movie:', error);
                result.innerHTML = `
                    <div class="error">
                        <h3>Oops! Something went wrong</h3>
                        <p>Could not find a movie. Please try again.</p>
                    </div>
                `;
                result.style.display = 'block';
            } finally {
                // Re-enable button
                spinBtn.disabled = false;
                spinBtn.textContent = '🎲 Spin Again!';
            }
        }

        async function getRandomMovie(genreId = '') {
            try {
                const randomPage = Math.floor(Math.random() * 10) + 1; // Random page 1-10
                let endpoint = `/discover/movie?sort_by=popularity.desc&page=${randomPage}&vote_average.gte=6`;
                
                if (genreId) {
                    endpoint += `&with_genres=${genreId}`;
                }

                const data = await makeAPIRequest(endpoint);
                
                if (data.results && data.results.length > 0) {
                    const randomIndex = Math.floor(Math.random() * data.results.length);
                    return data.results[randomIndex];
                }
                return null;
            } catch (error) {
                console.error('Error fetching random movie:', error);
                return null;
            }
        }

        function displayMovieResult(movie) {
            const result = document.getElementById('movieResult');
            const posterUrl = movie.poster_path ? `${IMAGE_BASE_URL}${movie.poster_path}` : 'https://via.placeholder.com/200x300?text=No+Poster';
            
            result.innerHTML = `
                <h3>🎬 Your Movie Pick!</h3>
                <img src="${posterUrl}" alt="${movie.title}" class="movie-poster">
                <h4>${movie.title}</h4>
                <p class="movie-rating">⭐ ${movie.vote_average.toFixed(1)}/10</p>
                <p>${movie.overview || 'No description available.'}</p>
                <p><strong>Release Date:</strong> ${movie.release_date || 'Unknown'}</p>
            `;
            result.style.display = 'block';
        }

        // Top Movies Functionality
        async function loadTopMovies() {
            const grid = document.getElementById('topMoviesGrid');
            grid.innerHTML = '<div class="loading">Loading amazing movies...</div>';
            
            try {
                const data = await makeAPIRequest(`/movie/top_rated?page=1`);
                
                if (data.results && data.results.length > 0) {
                    displayTopMovies(data.results);
                } else {
                    throw new Error('No movies found');
                }
            } catch (error) {
                console.error('Error loading top movies:', error);
                grid.innerHTML = `
                    <div class="error">
                        <h3>Unable to load movies</h3>
                        <p>Please check your internet connection and try again.</p>
                        <button onclick="loadTopMovies()" class="spin-btn" style="margin-top: 1rem;">🔄 Retry</button>
                    </div>
                `;
            }
        }

        function displayTopMovies(movies) {
            const grid = document.getElementById('topMoviesGrid');
            
            grid.innerHTML = movies.map(movie => {
                const posterUrl = movie.poster_path ? `${IMAGE_BASE_URL}${movie.poster_path}` : 'https://via.placeholder.com/200x300?text=No+Poster';
                
                return `
                    <div class="movie-card">
                        <img src="${posterUrl}" alt="${movie.title}">
                        <div class="movie-card-info">
                            <h4>${movie.title}</h4>
                            <div class="movie-rating">⭐ ${movie.vote_average.toFixed(1)}</div>
                            <p>${movie.release_date ? new Date(movie.release_date).getFullYear() : 'Unknown'}</p>
                            <p class="movie-card-overview">${movie.overview}</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set up navigation
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                });
            });

            // Load trending movies on homepage
            loadTrendingMovies();

            console.log('🎬 The Movie Box - Your Ultimate Movie Destination Loaded!');
            console.log('Ready to discover amazing movies! 🍿');
        });
    </script>
</body>
</html>
